name = "recipe-scraper"
main = "worker.js"
compatibility_date = "2024-01-01"

# Uncomment and set your account_id to deploy
# account_id = "your-account-id"

# Worker configuration
workers_dev = true

# Environment variables (if needed)
[vars]
# Add any environment variables here
IMAGE_DOMAIN = "https://images.nolanfoster.me"
SAVE_WORKER_URL = "https://recipe-save-worker.nolanfoster.workers.dev"

[env.preview]
name = "preview-recipe-scraper"
[env.preview.vars]
SAVE_WORKER_URL = "https://preview-recipe-save-worker.nolanfoster.workers.dev"

[env.staging]
name = "staging-recipe-scraper"
[env.staging.vars]
SAVE_WORKER_URL = "https://staging-recipe-save-worker.nolanfoster.workers.dev"

[[env.staging.kv_namespaces]]
binding = "RECIPE_STORAGE"
id = "3f8a3b17db9e4f8ea3eae83d864ad518"

[[env.staging.r2_buckets]]
binding = "RECIPE_IMAGES"
bucket_name = "recipe-images-staging"

[env.production]
name = "recipe-scraper"
[env.production.vars]
SAVE_WORKER_URL = "https://recipe-save-worker.nolanfoster.workers.dev"

[[env.production.kv_namespaces]]
binding = "RECIPE_STORAGE"
id = "dd001c20659a4d6982f6d650abcac880"

[[env.production.r2_buckets]]
binding = "RECIPE_IMAGES"
bucket_name = "recipe-images"

# Routes (optional - for custom domains)
# [[routes]]
# pattern = "example.com/api/*"
# zone_id = "your-zone-id"

# KV Namespaces for storing recipes
[[kv_namespaces]]
binding = "RECIPE_STORAGE"
id = "dd001c20659a4d6982f6d650abcac880"
preview_id = "dd001c20659a4d6982f6d650abcac880"

# Durable Objects (if you want persistent storage)
# [[durable_objects.bindings]]
# name = "RECIPE_STORAGE"
# class_name = "RecipeStorage"

# R2 Buckets (if you want to store recipe images)
[[r2_buckets]]
binding = "RECIPE_IMAGES"
bucket_name = "recipe-images"

[observability.logs]
enabled = true